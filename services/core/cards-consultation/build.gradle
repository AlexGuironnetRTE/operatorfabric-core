dependencies {
    compile boot.starterWebflux
    compile project(':client:cards-client-data')
    compile project(':tools:spring:spring-mongo-utilities')
    compile project(':tools:spring:spring-oauth2-utilities')
    testCompile testing.reactor
    testCompile project(':tools:spring:spring-test-utilities')
}

jar {
    manifest {
        attributes("Created-By"         : "David Binder",
                "Specification-Title": "OperatorFabric Card Read Service",
                "Main-Class"         : "org.lfenergy.operatorfabric.cards.consultation.CardConsultationApplication",
                "Class-Path"         : configurations.compile.collect { it.getName() }.join(' '))
    }
}

swaggerSources {
    endpoints {
        inputFile = file('../cards-publication/src/main/modeling/swagger.yaml')
        code {
            language = 'org.lfenergy.operatorfabric.generators.OpfabSpringGenerator'
            configFile = file('src/main/modeling/config.json')
            outputDir = file("./build/swagger")
            templateDir = file('../src/main/resources/swagger-templates')
            components = ['models']
        }
    }

    doc {
        inputFile = file('../cards-publication/src/main/modeling/swagger.yaml')
        code {
            language = 'html'
            outputDir = file("./build/docs/api")
        }
    }
}